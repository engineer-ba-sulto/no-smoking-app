### プロジェクト実装状況チェックレポート

#### 1. 概要

本レポートは、`functional-requirements.md`、`implementation-plan.md`の内容と、現在のソースコード構造を比較し、実装漏れの可能性がある機能や今後のタスクを洗い出したものです。

---

#### 2. 実装状況サマリー

- **必須 3 大機能（F01, F02, F03）はコア部分が実装済み:**

  - `F01: 見える化機能`、`F02: 対処法サポート`、`F03: アチーブメント` の主要なロジックと UI コンポーネントは存在しており、基本的な機能は動作する状態にあると推測されます。

- **一方で、ユーザーがアプリを継続利用する上で重要な機能が未実装です。**

---

#### 3.【要対応】実装漏れの可能性がある項目

以下の機能は、現在の計算ロジックの正確性を担保し、ユーザー体験を維持するために実装が必要です。

| ID      | 機能名                         | 詳細                                                                                                                       | 関連ファイル                                                                                 | 優先度 |
| :------ | :----------------------------- | :------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------- | :----- |
| **M01** | **設定：喫煙本数の編集機能**   | ユーザーが後から 1 日の喫煙本数を変更するための UI とデータ更新処理。これが無いと、計算の前提がズレてしまいます。          | `settings/cigarettes-setting.tsx`, `drizzle/repositories/user-profile-repository.ts`         | **高** |
| **M02** | **設定：タバコ価格の編集機能** | タバコの価格が変更された場合に対応するための UI とデータ更新処理。節約金額の計算に必須です。                               | `settings/price-setting.tsx`, `drizzle/repositories/user-profile-repository.ts`              | **高** |
| **M03** | **設定：1 箱の本数の編集機能** | （要件には明記されていないが）価格と同様に、1 箱あたりの本数を変更できる機能。価格設定とセットで実装するのが望ましいです。 | `settings/price-setting.tsx` (相乗りなど), `drizzle/repositories/user-profile-repository.ts` | **中** |

---

#### 4.【要対応】技術的課題・バグ

| ID      | 種別 | 内容                                                                                                                                                            | 関連ファイル                     | 優先度 |
| :------ | :--- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------- | :----- |
| **B01** | バグ | 開発用のデータベースリセット機能 `clearAllData` が意図通りに動作していない可能性。`db.delete`に条件が指定されていないため、全件削除ができない可能性があります。 | `drizzle/seeders/main-seeder.ts` | **中** |

---

#### 5. 今後のタスクとドキュメント更新の提案

現在のソースコードには、初期計画にはない追加機能のコンポーネントが含まれています。これらを正式なタスクとして定義し、ドキュメントを更新する必要があります。

| ID      | 種別         | 内容                                                                                | 備考                                                                        |
| :------ | :----------- | :---------------------------------------------------------------------------------- | :-------------------------------------------------------------------------- |
| **T01** | 追加機能     | **グラフ機能**の実装。                                                              | `ProgressChart.tsx` が該当する可能性あり。                                  |
| **T02** | 追加機能     | **健康状況機能**の実装。                                                            | `HealthTimeline.tsx` が該当する可能性あり。                                 |
| **T03** | 追加機能     | **リマインダー機能**の実装。                                                        | 関連ファイルは見当たらないため、新規実装が必要。                            |
| **D01** | ドキュメント | 上記追加機能（T01, T02, T03）の**機能要件**と**実装計画**をドキュメントに追記する。 | `functional-requirements.md` と `implementation-plan.md` の更新が必要です。 |
