# チケット作成ルール

## 概要

禁煙アプリプロジェクトにおけるチケットとサブチケットの作成ルールを定義します。このルールに従うことで、一貫性のあるチケット管理と効率的な開発が可能になります。

## ファイル命名規則

### 1. 親チケット（メインタスク）

```
T{フェーズ番号}-{タスク番号}-0-{タスク名}.md
```

**例:**

- `T1-1-0-drizzle-expo-sqlite-setup.md`
- `T2-1-0-date-calculation-utilities.md`
- `T3-1-0-visualization-feature-integration.md`

### 2. サブチケット（実装ステップ）

```
T{フェーズ番号}-{タスク番号}-{サブタスク番号}-{サブタスク名}.md
```

**例:**

- `T1-1-1-dependencies-installation.md`
- `T1-1-2-config-files-update.md`
- `T1-1-3-directory-structure-files.md`

### 3. 命名規則の詳細

#### フェーズ番号

- **T1**: フェーズ 1 - 開発環境とデータ基盤のセットアップ
- **T2**: フェーズ 2 - コアビジネスロジックの実装
- **T3**: フェーズ 3 - UI コンポーネントとのデータ連携
- **T4**: フェーズ 4 - 統合テストと最終調整

#### タスク番号

- 実装計画書のタスク ID に対応
- **T1-1**: Drizzle ORM と Expo SQLite の導入・設定
- **T1-2**: user_profile テーブルのスキーマ定義
- **T1-3**: データ操作用リポジトリ層の実装

#### サブタスク番号

- **0**: 親チケット（全体概要）
- **1〜9**: サブチケット（実装ステップ）

#### ファイル名の形式

- **小文字とハイフン**: `kebab-case`
- **英数字のみ**: 日本語は含まない
- **具体的な内容**: 何をするかが分かる名前

## チケット書式テンプレート

### 親チケット（T-X-Y-0）の書式

```markdown
# T{X}-{Y}-0: {タスク名}

## 概要

{タスクの概要を簡潔に説明}

## 目的

- {目的 1}
- {目的 2}
- {目的 3}

## 依存関係

- **依存タスク**: {依存するタスク ID}
- **担当領域**: {担当領域}

## サブチケット

- **T{X}-{Y}-1**: {サブタスク 1 の名前}
- **T{X}-{Y}-2**: {サブタスク 2 の名前}
- **T{X}-{Y}-3**: {サブタスク 3 の名前}

## 実装詳細

{実装の詳細説明}

## 実装手順

1. **{ステップ 1}**
2. **{ステップ 2}**
3. **{ステップ 3}**

## 完了条件

- [ ] {完了条件 1}
- [ ] {完了条件 2}
- [ ] {完了条件 3}

## 次のタスク

- **T{X}-{Y+1}**: {次のタスク名}
- **依存関係**: {依存関係の説明}

## 参考資料

- {参考資料 1}
- {参考資料 2}

## 備考

{備考や注意事項}
```

### サブチケット（T-X-Y-Z）の書式

````markdown
# T{X}-{Y}-{Z}: {サブタスク名}

## 概要

{サブタスクの概要を簡潔に説明}

## 目的

- {目的 1}
- {目的 2}
- {目的 3}

## 依存関係

- **依存タスク**: T{X}-{Y}-{Z-1}（前のサブタスク）
- **担当領域**: {担当領域}

## 実装詳細

### 1. {実装詳細 1}

{詳細な説明とコード例}

### 2. {実装詳細 2}

{詳細な説明とコード例}

## 実装手順

1. **{ステップ 1}**
   ```bash
   {コマンド例}
   ```
````

2. **{ステップ 2}**

   ```bash
   {コマンド例}
   ```

3. **{ステップ 3}**
   ```bash
   {コマンド例}
   ```

## 完了条件

- [ ] {完了条件 1}
- [ ] {完了条件 2}
- [ ] {完了条件 3}

## 次のタスク

- **T{X}-{Y}-{Z+1}**: {次のサブタスク名}
- **依存関係**: このタスクの完了後に実行可能

## トラブルシューティング

### よくある問題

1. **{問題 1}**

   ```bash
   # 解決方法
   {コマンド例}
   ```

2. **{問題 2}**
   ```bash
   # 解決方法
   {コマンド例}
   ```

## 備考

{備考や注意事項}

````

## 書式ルール

### 1. 見出しレベル
- **#**: チケットタイトル（1つのみ）
- **##**: 主要セクション
- **###**: サブセクション
- **####**: 詳細項目

### 2. コードブロック
```markdown
# 言語指定あり
```typescript
const example = "code";
````

# 言語指定なし（コマンド）

```bash
bun add package-name
```

````

### 3. チェックリスト
```markdown
- [ ] 未完了
- [x] 完了済み
````

### 4. 強調表現

- **太字**: 重要な項目
- _斜体_: 補足説明
- `コード`: ファイル名、コマンド、変数名

### 5. リンク

```markdown
- [リンクテキスト](URL)
- [参考資料](docs/reference.md)
```

## 作成手順

### 1. 親チケットの作成

1. 実装計画書からタスクを特定
2. ファイル名を決定（T-X-Y-0 形式）
3. テンプレートに従って内容を作成
4. サブチケットの一覧を記載

### 2. サブチケットの作成

1. 親チケットの実装手順を分析
2. 論理的な単位で分割
3. ファイル名を決定（T-X-Y-Z 形式）
4. テンプレートに従って内容を作成
5. 依存関係を明確に記載

### 3. レビューと更新

1. チケットの内容を確認
2. 依存関係の整合性をチェック
3. 完了条件の妥当性を検証
4. 必要に応じて内容を更新

## 管理ルール

### 1. ファイル配置

- すべてのチケットは `docs/ticket/` ディレクトリに配置
- ファイル名でソート可能な形式を使用

### 2. 進捗管理

- チェックリストを使用して進捗を管理
- 完了した項目は `[x]` に変更
- 定期的に進捗を更新

### 3. 依存関係管理

- 依存タスクの完了を確認してから作業開始
- 依存関係の変更時は関連チケットを更新

### 4. 品質管理

- 各チケットの完了条件を明確に定義
- テスト項目を含める
- トラブルシューティング情報を記載

## 例：T1-1 のチケット構造

```
docs/ticket/
├── T1-1-0-drizzle-expo-sqlite-setup.md    # 親チケット
├── T1-1-1-dependencies-installation.md    # サブチケット1
├── T1-1-2-config-files-update.md          # サブチケット2
├── T1-1-3-directory-structure-files.md    # サブチケット3
├── T1-1-4-migration-generation-test.md    # サブチケット4
└── T1-1-5-application-integration.md      # サブチケット5
```

## 注意事項

1. **一貫性の維持**: すべてのチケットで同じ書式を使用
2. **明確性の確保**: 何をするかが分かりやすい内容にする
3. **実用性の重視**: 実際の作業で使いやすい形式にする
4. **更新の容易さ**: 進捗管理が簡単な形式にする

このルールに従うことで、効率的で一貫性のあるチケット管理が可能になります。
