# T4-3-0: 設定：1箱の本数の編集機能

## 概要

ユーザーが吸っているタバコ一箱あたりの本数を変更できる機能。国や銘柄によって一箱の本数は異なるため、ユーザーが柔軟に設定を変更できる必要があります。この設定は節約金額の計算精度に直接影響します。

## 目的

- 多様なタバコの仕様（一箱あたりの本数）に対応する。
- 節約金額計算の正確性を担保する。

## 依存関係

- **依存タスク**: `T1-3`
- **担当領域**: フロントエンド/バックエンド

## サブチケット

- **T4-3-1**: 1箱の本数編集UIの実装
- **T4-3-2**: リポジトリ層における本数更新ロジックの実装
- **T4-3-3**: UIとリポジトリの連携
- **T4-3-4**: 本数編集機能のテスト

## 実装詳細

`T4-2`の価格編集機能とUIを共通化し、`price-setting.tsx`内で本数も編集できるようにします。更新ロジックは`userProfileRepository`に新しいメソッドを追加して実装します。

## 実装手順

1. **UIコンポーネントの拡張**: `src/app/settings/price-setting.tsx`に、1箱の本数を編集するUI要素を追加します。
2. **リポジトリの更新**: `src/drizzle/repositories/user-profile-repository.ts` に、`cigarettesPerPackage`を更新するメソッドを実装します。
3. **データ連携**: UIコンポーネントからリポジトリの更新メソッドを呼び出します。
4. **動作確認**: 設定を変更し、節約金額の計算に正しく反映されることを確認します。

## 完了条件

- [ ] 設定画面からタバコ一箱の本数を変更できる。
- [ ] 変更した値がデータベースに保存され、アプリ再起動後も維持される。
- [ ] 変更した本数が、節約金額の計算に正しく反映される。

## 次のタスク

- **T4-4**: DBリセット機能のバグ修正
- **依存関係**: 本タスク完了後。

## 備考

UI/UXの一貫性を保つため、`T4-2`のタバコ価格編集機能と密に連携して開発を進めることが推奨されます。
