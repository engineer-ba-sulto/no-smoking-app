# T4-1-0: 設定：喫煙本数の編集機能

## 概要

ユーザーがオンボーディング後にも 1 日の喫煙本数を自由に変更できる機能。この機能がない場合、ユーザーの禁煙状況に基づいた計算（我慢した本数、節約金額など）の前提が崩れ、アプリの正確性が損なわれるため実装が必須です。

## 目的

- ユーザーが自身の喫煙習慣の変化に合わせて設定を更新できるようにする。
- アプリケーションが提供するデータの正確性を維持する。
- ユーザー体験を向上させる。

## 依存関係

- **依存タスク**: `T1-3` (データ操作用リポジトリ層の実装)
- **担当領域**: フロントエンド/バックエンド

## サブチケット

- **T4-1-1**: リポジトリ層における更新ロジックの実装
- **T4-1-2**: UI とリポジトリの連携

## 実装詳細

設定画面に新しい項目を追加し、ユーザーが数値を入力・変更できるようにします。変更された値は、`userProfileRepository`を通じてデータベースの`user_profiles`テーブルに永続化されます。
**（UI 実装 `T4-1-1` は完了済み）**

## 実装手順

1. **リポジトリの更新**: `src/drizzle/repositories/user-profile-repository.ts` に、`cigarettesPerDay`を更新するメソッドを実装します。
2. **データ連携**: UI コンポー ннен トからリポジトリの更新メソッドを呼び出し、データベースの値を更新します。
3. **動作確認**: 設定画面で値を変更し、ホーム画面の計算結果に正しく反映されることを確認します。

## 完了条件

- [ ] 設定画面から 1 日の喫煙本数を変更できる。
- [ ] 変更した値がデータベースに保存される。
- [ ] アプリを再起動しても変更した値が維持されている。
- [ ] 変更した値が、我慢した本数や節約金額の計算に正しく反映される。

## 次のタスク

- **T4-2**: 設定：タバコ価格の編集機能
- **依存関係**: 本タスクと同様に `T1-3` に依存。

## 備考

UI は既存のコンポーネントを参考に、アプリケーション全体のデザインと一貫性を保つこと。
