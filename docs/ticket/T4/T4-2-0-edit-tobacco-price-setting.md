# T4-2-0: 設定：タバコ価格の編集機能

## 概要

ユーザーが自身が吸っているタバコの価格を、後から自由に変更できる機能。節約金額の計算はユーザーのモチベーション維持に不可欠な要素であり、タバコの価格改定や銘柄変更に対応するために必須の機能です。

## 目的

- タバコの価格変動に対応し、節約金額の計算精度を維持する。
- ユーザーが自身の状況に合わせて設定をカスタマイズできるようにする。

## 依存関係

- **依存タスク**: `T1-3` (データ操作用リポジトリ層の実装)
- **担当領域**: フロントエンド/バックエンド

## サブチケット

- **T4-2-1**: リポジトリ層における価格更新ロジックの実装
- **T4-2-2**: UI とリポジトリの連携
- **T4-2-3**: 価格編集機能のテスト

## 実装詳細

`T4-1`と同様に、設定画面に価格編集用の UI を設け、`userProfileRepository`を通じてデータベースの`packagePrice`カラムを更新します。
**（UI 実装 `T4-2-1` は完了済み）**

## 実装手順

1. **リポジトリの更新**: `src/drizzle/repositories/user-profile-repository.ts` に、`packagePrice`を更新するメソッドを実装します。
2. **データ連携**: UI コンポーネントからリポジトリの更新メソッドを呼び出し、データベースの値を更新します。
3. **動作確認**: 設定画面で価格を変更し、ホーム画面の節約金額に正しく反映されることを確認します。

## 完了条件

- [ ] 設定画面からタバコ一箱の価格を変更できる。
- [ ] 変更した値がデータベースに保存され、アプリ再起動後も維持される。
- [ ] 変更した価格が、節約金額の計算に正しく反映される。

## 次のタスク

- **T4-3**: 設定：1 箱の本数の編集機能
- **依存関係**: 本タスクと関連性が高いため、UI を共通化する可能性がある。

## 備考

タスク`T4-3`（1 箱の本数編集機能）と UI/UX の親和性が高いため、同時に実装することも検討します。このチケットではまず価格編集機能単体の実装を対象とします。
