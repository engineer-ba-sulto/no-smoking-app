# T4-1-4: 編集機能のテスト

## 概要

実装された「喫煙本数の編集機能」が、仕様通りに正しく動作するかをテストします。

## 目的

- 機能全体の品質を保証する。
- 予期せぬ不具合やエッジケースを発見し、修正する。

## 依存関係

- **依存タスク**: T4-1-3
- **担当領域**: QA

## 実装詳細

### 1. テストケースの洗い出し
以下の観点でテストケースを作成します。
- **正常系**:
    - 正の整数を入力して保存し、値が反映されるか。
    - アプリを再起動しても値が維持されるか。
    - ホーム画面の計算結果（我慢した本数など）が、新しい設定値に基づいて更新されるか。
- **異常系**:
    - 0や負の数を入力した場合の挙動（バリデーションが望ましい）。
    - 数字以外の文字を入力した場合の挙動。
    - 未入力のまま保存しようとした場合の挙動。

## 実装手順

1. **テスト環境の準備**: 開発ビルドをインストールした実機またはシミュレータを用意します。
2. **正常系テストの実施**:
    1. 設定画面を開き、喫煙本数を `10` に変更して保存する。
    2. ホーム画面に戻り、計算結果が変わることを確認する。
    3. アプリを完全に終了し、再度起動する。
    4. 設定画面を開き、値が `10` のままであることを確認する。
3. **異常系テストの実施**:
    1. 設定画面で、`0`, `-5`, `abc` などを入力し、保存ボタンを押す。
    2. エラーメッセージが表示される、または保存ができないなど、適切な挙動を示すことを確認する。

## 完了条件

- [ ] すべてのテストケースを実施し、結果を記録する。
- [ ] 不具合が発見された場合は、関連するチケットを起票し、修正される。
- [ ] すべてのテストケースをパスする。

## 次のタスク

- **T4-2-0**: 設定：タバコ価格の編集機能
- **依存関係**: 本機能の品質が保証された後に着手。

## トラブルシューティング

### よくある問題

1. **ホーム画面の計算結果が即時反映されない**

   ```bash
   # 解決方法
   # T4-1-3で実装した状態の再検証ロジックが正しく機能しているか確認する。
   # 画面遷移（Focus）イベントでデータを再取得するなどの対策も考えられる。
   ```

## 備考

手動テストが中心となりますが、可能であればReact Native Testing Libraryなどを用いた自動テストの実装も検討します（本タスクでは必須としない）。
