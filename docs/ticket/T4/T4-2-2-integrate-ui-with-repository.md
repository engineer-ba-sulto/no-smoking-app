# T4-2-3: UIとリポジトリの連携

## 概要

`price-setting.tsx`のUIと`user-profile-repository.ts`の価格更新ロジックを連携させます。

## 目的

- ユーザーによる価格変更操作を、データベースに反映させる。

## 依存関係

- **依存タスク**: T4-2-1, T4-2-2
- **担当領域**: フロントエンド/バックエンド

## 実装詳細

### 1. イベントハンドラの実装
`price-setting.tsx`の「保存」ボタンに`onPress`イベントハンドラを追加します。

### 2. リポジトリメソッドの呼び出し
イベントハンドラ内で、`userProfileRepository.updatePackagePrice`メソッドを呼び出します。

### 3. 状態管理の更新
データベース更新後、`useSmokerData`フックが保持しているSWRキャッシュを`mutate`関数で更新し、UIに最新のデータが反映されるようにします。

## 実装手順

1. **ファイルを開く**: `src/app/settings/price-setting.tsx` を開きます。
2. **リポジトリのインポート**: `userProfileRepository`をインポートします。
3. **イベントハンドラ作成**: 「保存」ボタンが押されたときに、入力された値で`updatePackagePrice`を呼び出す関数を作成します。
4. **状態の再検証**: 更新処理の成功後、`useSmokerData`の`mutate`を呼び出します。

## 完了条件

- [ ] 設定画面の「保存」ボタンを押すと、`updatePackagePrice`メソッドが呼び出される。
- [ ] データベース更新後、UI上の価格表示も新しい値に更新される。

## 次のタスク

- **T4-2-4**: 価格編集機能のテスト
- **依存関係**: このタスクの完了が前提となる。
