# T5-4-3: ペイウォール画面のレスポンシブ対応

## 概要

このタスクでは、ペイウォール画面を様々な画面サイズやデバイスに対応させ、すべてのユーザーが最適な体験を得られるようにします。スマートフォン、タブレット、異なる向き（縦向き・横向き）に対応したレスポンシブデザインを実装します。

## 目的

- 異なる画面サイズでの最適な表示を実現する
- デバイスの向き変更に対応する
- タッチ操作とマウス操作の両方に対応する
- 高 DPI ディスプレイでの表示品質を向上させる
- 異なるプラットフォーム（iOS/Android）での一貫性を保つ

## 実装内容

### 1. 画面サイズ対応

- **スマートフォン対応**: 320px〜768px 幅での最適化
- **タブレット対応**: 768px〜1024px 幅での最適化
- **大画面対応**: 1024px 以上での最適化
- **動的レイアウト**: 画面サイズに応じた柔軟な配置

### 2. デバイス向き対応

- **縦向き（Portrait）**: 縦長画面での最適化
- **横向き（Landscape）**: 横長画面での最適化
- **向き変更時のアニメーション**: スムーズな遷移
- **向き固定の考慮**: 特定の向きでの固定表示

### 3. プラットフォーム対応

- **iOS 固有の調整**: Safe Area、ステータスバー対応
- **Android 固有の調整**: ナビゲーションバー、システム UI 対応
- **プラットフォーム別のスタイリング**: ネイティブな見た目の実現
- **プラットフォーム別のジェスチャー**: スワイプ、ピンチ等の対応

### 4. インタラクション対応

- **タッチ操作**: 指での操作に最適化
- **マウス操作**: デスクトップ環境での操作
- **キーボード操作**: アクセシビリティ対応
- **ジェスチャー操作**: スワイプ、ピンチ等の対応

## 技術要件

### 使用技術

- **React Native**: 既存のフレームワーク
- **Dimensions API**: 画面サイズの取得
- **useDeviceOrientation**: デバイス向きの監視
- **Platform API**: プラットフォーム固有の処理
- **SafeAreaView**: セーフエリア対応

### レスポンシブ設計原則

- **Mobile First**: モバイルファーストでの設計
- **Fluid Layout**: 流動的なレイアウト
- **Flexible Images**: 柔軟な画像表示
- **Media Queries**: 条件分岐によるスタイル適用

## 実装手順

### Phase 1: `useScreenInfo` カスタムフックの実装

1.  `src/hooks` ディレクトリに `useScreenInfo.ts` を作成します。
2.  React Native の `Dimensions` と `useWindowDimensions` を利用して、現在の画面幅、高さ、向き (`portrait`/`landscape`) を取得するロジックを実装します。
3.  画面幅に基づいて `isMobile`, `isTablet` などの判定を行うロジックを追加します。

### Phase 2: レスポンシブスタイルの適用

1.  `paywall.tsx` で `useScreenInfo()` フックを呼び出し、`isTablet` や `isLandscape` を取得します。
2.  既存の `StyleSheet.create` を `getStyles(isTablet, isLandscape)` のような関数に変更し、引数に応じてスタイル（例：`flexDirection`, `fontSize`, `padding`）を切り替えるようにリファクタリングします。
3.  まずは親コンポーネントのレイアウト（コンテナの配置など）からレスポンシブ対応を行い、次にプラン選択肢、ボタン、テキストの順で、大きな要素から小さな要素へと進めます。

### Phase 3: プラットフォーム固有の調整

1.  iOS のセーフエリア（ノッチ部分）や Android のナビゲーションバーを考慮し、`SafeAreaView` や `Platform` API を使って UI が隠れないように調整します。

## ブレークポイント定義

### 画面サイズ別ブレークポイント

```typescript
const breakpoints = {
  mobile: { min: 0, max: 767 },
  tablet: { min: 768, max: 1023 },
  desktop: { min: 1024, max: Infinity },
};
```

### デバイス向き別設定

```typescript
const orientations = {
  portrait: "portrait",
  landscape: "landscape",
};
```

## テスト項目

### 画面サイズテスト

- [ ] 320px 幅（最小スマートフォン）で正常表示
- [ ] 768px 幅（タブレット境界）で正常表示
- [ ] 1024px 幅（デスクトップ境界）で正常表示
- [ ] 動的リサイズ時に適切にレイアウトが変更される

### デバイス向きテスト

- [ ] 縦向きで最適なレイアウトが表示される
- [ ] 横向きで最適なレイアウトが表示される
- [ ] 向き変更時にスムーズに遷移する
- [ ] 向き固定時も正常に動作する

### プラットフォームテスト

- [ ] iOS で Safe Area が適切に処理される
- [ ] Android でナビゲーションバーが適切に処理される
- [ ] プラットフォーム固有のスタイルが適用される
- [ ] プラットフォーム固有のジェスチャーが動作する

### インタラクションテスト

- [ ] タッチ操作が適切に反応する
- [ ] マウス操作が適切に反応する
- [ ] キーボード操作が適切に動作する
- [ ] ジェスチャー操作が適切に動作する

## パフォーマンス要件

- **レイアウト計算時間**: 100ms 以内
- **向き変更時の応答時間**: 200ms 以内
- **リサイズ時の応答時間**: 150ms 以内
- **メモリ使用量**: 既存比で 15%以内の増加

## 依存関係

- **依存タスク**: `T5-4-1` (モックデータの置き換え), `T5-4-2` (購入・復元ボタンの接続)
- **担当領域**: フロントエンド開発, レスポンシブデザイン

## 完了条件

- [ ] すべての画面サイズで最適な表示が実現されている
- [ ] デバイス向き変更に対応している
- [ ] プラットフォーム固有の調整が完了している
- [ ] インタラクションが最適化されている
- [ ] パフォーマンス要件が満たされている
- [ ] すべてのテスト項目が合格している

## 次のタスク

- **T5-4-4**: ペイウォール画面の UI 改善

## 注意事項

- 既存の UI コンポーネントとの互換性を保つ
- パフォーマンスへの影響を最小限に抑える
- アクセシビリティ要件を維持する
- プラットフォーム固有のガイドラインに準拠する
