# T5-4-4: ペイウォール画面の UI 改善

## 概要

このタスクでは、既存のペイウォール画面の UI/UX を改善し、ユーザビリティと視覚的魅力を向上させます。アニメーション、視覚的フィードバック、アクセシビリティの向上に焦点を当てます。

## 目的

- ペイウォール画面の視覚的魅力を向上させる
- ユーザーエクスペリエンスを改善する
- アクセシビリティを向上させる
- アニメーションとマイクロインタラクションを追加する
- エラーハンドリングとローディング状態の改善

## 実装内容

### 1. 視覚的改善

- **カラーパレットの最適化**: ブランドカラーとの一貫性を保つ
- **タイポグラフィの改善**: 読みやすさと階層構造の明確化
- **アイコンとイラストの追加**: 視覚的な魅力の向上
- **グラデーションとシャドウの追加**: モダンなデザインの実装

### 2. アニメーション実装

- **ページ遷移アニメーション**: スムーズな画面遷移
- **ボタンインタラクション**: ホバー・タップ時のフィードバック
- **ローディングアニメーション**: 購入処理中の視覚的フィードバック
- **成功・エラー状態のアニメーション**: 操作結果の明確な表示

### 3. ユーザビリティ改善

- **価格表示の明確化**: 割引や特典の視覚的強調
- **機能説明の改善**: より分かりやすい説明文
- **CTA ボタンの最適化**: より目立つデザインと配置
- **フォームバリデーション**: リアルタイムな入力検証

### 4. アクセシビリティ向上

- **スクリーンリーダー対応**: 適切なラベルと説明
- **キーボードナビゲーション**: タブ順序の最適化
- **コントラスト比の改善**: WCAG 2.1 AA 準拠
- **フォーカス表示の改善**: 明確なフォーカスインジケーター

## 技術要件

### 使用技術

- **React Native**: 既存のフレームワーク
- **Reanimated 3**: アニメーション実装
- **React Native Vector Icons**: アイコン表示
- **Accessibility API**: アクセシビリティ機能

### パフォーマンス要件

- アニメーションのフレームレート: 60fps
- 初期表示時間: 2 秒以内
- メモリ使用量: 既存比で 20%以内の増加

## 実装手順

### Phase 1: コンポーネントの分割

1.  **プラン選択カード**: `paywall.tsx` 内のプラン選択肢の UI を、`PlanCard.tsx` のような独立したコンポーネントに切り出します。`isSelected` やプラン情報を `props` で受け取るように設計します。
2.  **CTA ボタン**: 購入ボタンを `PurchaseButton.tsx` コンポーネントに切り出し、`isLoading` を `props` で受け取れるようにします。

### Phase 2: アニメーションの実装 (`Reanimated 3`)

1.  **プラン選択アニメーション**: `PlanCard.tsx` 内で、`isSelected` prop の変更をトリガーに、`useAnimatedStyle` と `withTiming` を使ってスタイル（例: 枠線の色、背景色、`transform: [{ scale: 1.05 }]`）を滑らかに変化させます。
2.  **ローディングアニメーション**: `PurchaseButton.tsx` 内で、`isLoading` prop が `true` の場合にボタン内に `<ActivityIndicator />` を表示します。また、`paywall.tsx` 全体を覆うローディングオーバーレイを作成し、`isPurchasing` が `true` の場合にフェードイン/フェードアウトさせるアニメーションを実装します。

### Phase 3: 視覚的・ユーザビリティ改善

1.  **視覚的改善**: ブランドガイドラインに合わせてカラーパレット、タイポグラフィ、アイコンを見直します。
2.  **ユーザビリティ改善**: 最もお得なプランに「一番人気」のようなバッジを追加し、視覚的に強調します。CTA ボタンの文言やデザインを最適化し、クリック率の向上を図ります。

### Phase 4: アクセシビリティ対応

1.  `PlanCard` や `PurchaseButton` に、`accessibilityLabel` や `accessibilityState` などの適切な props を設定し、スクリーンリーダーの読み上げを最適化します。

## テスト項目

### 機能テスト

- [ ] すべてのアニメーションが正常に動作する
- [ ] ボタンインタラクションが適切に機能する
- [ ] ローディング状態が正しく表示される
- [ ] エラーハンドリングが適切に動作する

### アクセシビリティテスト

- [ ] スクリーンリーダーで正常に読み上げられる
- [ ] キーボードナビゲーションが機能する
- [ ] コントラスト比が WCAG 2.1 AA に準拠している
- [ ] フォーカス表示が明確である

### パフォーマンステスト

- [ ] アニメーションが 60fps で動作する
- [ ] 初期表示時間が 2 秒以内
- [ ] メモリ使用量が許容範囲内

## 依存関係

- **依存タスク**: `T5-4-1` (モックデータの置き換え), `T5-4-2` (購入・復元ボタンの接続), `T5-4-3` (ペイウォール画面のレスポンシブ対応)
- **担当領域**: UI/UX 開発, フロントエンド開発

## 完了条件

- [ ] ペイウォール画面の視覚的魅力が向上している
- [ ] アニメーションとマイクロインタラクションが実装されている
- [ ] アクセシビリティ要件が満たされている
- [ ] パフォーマンス要件が満たされている
- [ ] すべてのテスト項目が合格している

## 次のフェーズ

- **T5-5-0**: 画面遷移ロジックの更新
