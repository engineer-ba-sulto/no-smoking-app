# T2-1-0: 日付計算ユーティリティの作成

## 概要

`date-fns`ライブラリを利用して、禁煙アプリのコア機能で必要となる日付や時間に関連する計算処理を行う、再利用可能なユーティリティ関数群を実装します。

## 目的

- 禁煙継続時間（年、月、日、時、分、秒）を正確に計算する基盤を構築する。
- 日数や特定の期間を扱う計算ロジックを標準化し、コードの重複を避ける。
- UI から独立してテスト可能な、信頼性の高い日付計算モジュールを提供する。

## 依存関係

- **依存タスク**: なし
- **担当領域**: ビジネスロジック

## サブチケット

- **T2-1-1**: 禁煙継続時間の計算ロジック実装
- **T2-1-2**: 日付関連の補助ユーティリティ関数実装

## 実装詳細

`date-fns` を活用し、以下の主要な関数を実装します。

- **`calculateSmokingCessationDuration(startDate: Date): Duration`**:
  - 禁煙開始日時を引数に取り、現在までの経過時間を年・月・日・時・分・秒の形式で返す。
  - `intervalToDuration` などの `date-fns` の関数を利用する。
- **`formatDuration(duration: Duration): string`**:
  - `Duration` オブジェクトを整形し、UI 表示用の文字列（例：「3 日と 5 時間 20 分」）を生成する。
- **その他の補助関数**:
  - 必要に応じて、日付のフォーマット変換や特定の日付との差分を計算する関数などを実装する。

すべての関数は `src/utils/date-calculation.ts` のような独立したファイルにまとめることを想定しています。

## 実装手順

1. **禁煙継続時間を計算するコアロジックの実装** (T2-1-1)
2. **日付フォーマットや差分計算などの補助的なユーティリティ関数の実装** (T2-1-2)

## 完了条件

- [ ] 禁煙開始日時から現在までの経過時間を正確に計算できる関数が実装されている。
- [ ] 実装された関数群が他のビジネスロジック（成果計算など）から利用できる状態になっている。

## 次のタスク

- **T2-2**: [F01, F03] 成果計算ロジックの実装
- **依存関係**: このタスクで作成した日付計算ユーティリティは、節約できた金額や我慢した本数を計算する際に必須となります。

## 参考資料

- [date-fns Documentation](https://date-fns.org/)

## 備考

タイムゾーンの扱いに注意し、アプリケーション全体で一貫した基準（例: UTC またはデバイスのローカルタイム）で計算を行うように設計します。
