# T2-3-0: [F03] アチーブメント判定ロジックの実装

## 概要

禁煙の成果（継続時間、我慢した本数、節約金額）に基づいて、ユーザーがどのアチーブメント（実績）を達成したかを判定するビジネスロジックを実装します。

## 目的

- ユーザーのモチベーションを維持・向上させるためのゲーミフィケーション要素を実装する。
- 成果データと達成条件を照合し、達成状況を判定する機能を提供する。
- 「せいか」画面で表示するアチーブメントの達成状態（カラー/グレーアウト）の元となるデータを作成する。

## 依存関係

- **依存タスク**: `T2-2` (成果計算), `T2-3-1` (アチーブメント定義)
- **担当領域**: ビジネスロジック

## サブチケット

- **T2-3-2**: アチーブメント達成条件の判定ロジック実装
- **T2-3-3**: 成果データとの統合と判定結果の出力

## 実装詳細

すべてのアチーブメントの達成条件（例: 「禁煙 24 時間達成」「節約金額 1000 円突破」）を定義したデータ構造を用意します。
そして、T2-2 で計算された現在の成果データを入力として受け取り、各アチーブメントの達成状況（`true`/`false`）を判定する関数を実装します。

- **`AchievementDefinitions`**:
  - 各アチーブメントの ID、名称、説明、達成条件（時間、本数、金額など）を定義したオブジェクトまたは配列。
- **`checkAchievements(outcomes: OutcomeData, definitions: AchievementDefinitions): AchievementStatus[]`**:
  - 現在の成果データとアチーブメント定義を引数に取り、各アチーブメントの達成状況を配列で返す。

これらのロジックは `src/utils/achievement-logic.ts` のような新しいファイルに実装します。

## 実装手順

1. **すべてのアチーブメントの ID、名称、達成条件を網羅したデータ構造を定義**します (T2-3-1)。
2. **成果データと達成条件を比較し、達成/未達成を判定するコアロジックを実装**します (T2-3-2)。
3. **T2-2 で計算した成果データを入力として受け取り、すべてのアチーブメントの達成状況リストを返す統合関数を実装**します (T2-3-3)。

## 完了条件

- [ ] すべてのアチーブメントの達成条件がコードとして定義されている。
- [ ] 現在の成果データから、各アチーブメントの達成状況を正しく判定できる関数が実装されている。
- [ ] UI レイヤーが必要とする形式（例: アチーブメント ID と達成状況のペアの配列）でデータを出力できる。

## 次のタスク

- **T3-2**: [F03] 「アチーブメント」機能の画面組み込み
- **依存関係**: このタスクでアチーブメントの判定ロジックが完成するため、UI コンポーネントと連携して画面に表示することが可能になります。

## 備考

将来的にアチーブメントを追加・変更しやすいように、データ構造を拡張性の高い設計にすることが望ましいです。
